var kamaDatepicker=function(t,e){function a(t,e,a){t=parseInt(t),e=parseInt(e),a=parseInt(a);for(var n=t-1600,o=e-1,d=a-1,i=365*n+parseInt((n+3)/4)-parseInt((n+99)/100)+parseInt((n+399)/400),r=0;o>r;++r)i+=R[r];o>1&&(n%4==0&&n%100!=0||n%400==0)&&++i,i+=d;var l=i-79,s=parseInt(l/12053);l%=12053;var c=979+33*s+4*parseInt(l/1461);l%=1461,l>=366&&(c+=parseInt((l-1)/365),l=(l-1)%365);for(var r=0;11>r&&l>=Y[r];++r)l-=Y[r];var p=r+1,v=l+1;return[c,p,v]}function n(t,e,a){return l(d(t,e,a))}function o(t){var e,a,n,o,d,i,r,l=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178],p=l.length,v=t+621,u=-14,g=l[0];if(g>t||t>=l[p-1])throw new Error("Invalid Jalaali year "+t);for(r=1;p>r&&(e=l[r],a=e-g,!(e>t));r+=1)u=u+8*s(a,33)+s(c(a,33),4),g=e;return i=t-g,u=u+8*s(i,33)+s(c(i,33)+3,4),4===c(a,33)&&a-i===4&&(u+=1),o=s(v,4)-s(3*(s(v,100)+1),4)-150,d=20+u-o,6>a-i&&(i=i-a+33*s(a+4,33)),n=c(c(i+1,33)-1,4),-1===n&&(n=4),{leap:n,gy:v,march:d}}function d(t,e,a){var n=o(t);return r(n.gy,3,n.march)+31*(e-1)-s(e,7)*(e-7)+a-1}function r(t,e,a){var n=s(1461*(t+s(e-8,6)+100100),4)+s(153*c(e+9,12)+2,5)+a-34840408;return n=n-s(3*s(t+100100+s(e-8,6),100),4)+752}function l(t){var e,a,n,o,d;return e=4*t+139361631,e=e+4*s(3*s(4*t+183187720,146097),4)-3908,a=5*s(c(e,1461),4)+308,n=s(c(a,153),5)+1,o=c(s(a,153),12)+1,d=s(e,1461)-100100+s(8-o,6),{gy:d,gm:o,gd:n}}function s(t,e){return~~(t/e)}function c(t,e){return t-~~(t/e)*e}if("string"!=typeof t||0===t.length)return void console.error("kamadatepicker error: input ID is not string or is empty");var p,v,u,g,b,f,y,h,I,m,x=e||{},k=!1,C=!1,D={1:"فروردین",2:"اردیبهشت",3:"خرداد",4:"تیر",5:"مرداد",6:"شهریور",7:"مهر",8:"آبان",9:"آذر",10:"دی",11:"بهمن",12:"اسفند"},w={"شنبه":"ش","یکشنبه":"ی","دوشنبه":"د","سه شنبه":"س","چهارشنبه":"چ","پنج شنبه":"پ","جمعه":"ج"},B=["٠","١","٢","٣","۴","۵","۶","٧","٨","٩","١٠","١١","١٢","١٣","١۴","١۵","١۶","١٧","١٨","١٩","٢٠","٢١","٢٢","٢٣","٢۴","٢۵","٢۶","٢٧","٢٨","٢٩","٣٠","٣١","٣٢"];x.placeholder=void 0!==x.placeholder?x.placeholder:"",x.twodigit=void 0!==x.twodigit?x.twodigit:!0,x.closeAfterSelect=void 0!==x.closeAfterSelect?x.closeAfterSelect:!0,x.nextButtonIcon=void 0!==x.nextButtonIcon?x.nextButtonIcon:!1,x.previousButtonIcon=void 0!==x.previousButtonIcon?x.previousButtonIcon:!1,x.buttonsColor=void 0!==x.buttonsColor?x.buttonsColor:!1,x.forceFarsiDigits=void 0!==x.forceFarsiDigits?x.forceFarsiDigits:!1,x.markToday=void 0!==x.markToday?x.markToday:!1,x.markHolidays=void 0!==x.markHolidays?x.markHolidays:!1,x.highlightSelectedDay=void 0!==x.highlightSelectedDay?x.highlightSelectedDay:!1,x.sync=void 0!==x.sync?x.sync:!1,x.gotoToday=void 0!==x.gotoToday?x.gotoToday:!1;var S=$("#"+t);void 0===S.attr("placeholder")&&S.attr("placeholder",x.placeholder),S.wrap("<div id='bd-root-"+t+"</div>"),S.after("<div id='bd-main-"+t+"' class='bd-main bd-hide' style='position: absolute; direction: rtl;'></div>");var T=$("#bd-main-"+t);T.append("<div class='bd-calendar'></div>");var F=T.find(".bd-calendar");F.append("<div class='bd-title'></div>");var O=F.find(".bd-title");F.append("<table class='bd-table' dir='rtl' cellspacing='0' cellpadding='0'></table>"),O.append("<button id='bd-next-"+t+"' class='bd-next' type='button' title='ماه بعدی' data-toggle='tooltip'><span>بعدی</span></button>");var A=$("#bd-next-"+t);x.nextButtonIcon&&(A.find("span").css("display","none"),-1!==x.nextButtonIcon.indexOf(".")?A.css("background-image","url("+x.nextButtonIcon+")"):A.addClass(x.nextButtonIcon)),O.append("<div class='bd-dropdown'></div><div class='bd-dropdown'></div>"),O.find(".bd-dropdown:nth-child(2)").append("<select id='bd-month-"+t+"' class='bd-month'></select>");var H=$("#bd-month-"+t);$.each(D,function(t,e){H.append($("<option></option>").attr("value",t).text(e))}),O.find(".bd-dropdown:nth-child(3)").append("<select id='bd-year-"+t+"' class='bd-year'></select>");var E=$("#bd-year-"+t);O.append("<button id='bd-prev-"+t+"' class='bd-prev' type='button' title='ماه قبلی' data-toggle='tooltip'><span>قبلی</span></button>");var j=$("#bd-prev-"+t);x.nextButtonIcon&&(j.find("span").css("display","none"),-1!==x.previousButtonIcon.indexOf(".")?j.css("background-image","url("+x.previousButtonIcon+")"):j.addClass(x.previousButtonIcon)),x.buttonsColor&&(A.css("color",x.buttonsColor),A.find("span").css("color",x.buttonsColor),j.css("color",x.buttonsColor),j.find("span").css("color",x.buttonsColor)),F.find(".bd-table").append("<thead><tr></tr></thead>"),$.each(w,function(t,e){F.find(".bd-table thead tr").append($("<th></th>").text(e))}),F.find(".bd-table").append("<tbody id='bd-table-days-"+t+"' class='bd-table-days'></tbody>");var J=$("#bd-table-days-"+t);if(x.gotoToday){F.append("<div class='bd-goto-today'>برو به امروز</div>");var M=F.find(".bd-goto-today")}S.on("focus",function(){T.removeClass("bd-hide"),x.sync&&C===!1&&(q(),C=!0)}).on("blur",function(){0==k?(T.addClass("bd-hide"),C=!1):(k=!1,S.focus(),event.preventDefault())}),T.on("mousedown",function(t){k=!0}),H.on("change",function(){v=parseInt(this.value),h=N(p,v),y=Q(p,v),U(h,y)}),E.on("change",function(){p=parseInt(this.value),h=N(p,v),y=Q(p,v),U(h,y)});var R=[31,28,31,30,31,30,31,31,30,31,30,31],Y=[31,31,31,31,31,31,30,30,30,30,30,29],q=function(){var t=z(S.val());""!==t&&(t=t.split("/"),H.val(parseInt(t[1])),H.trigger("change"),E.val(parseInt(t[0])),E.trigger("change"),x.highlightSelectedDay&&(T.find(".bd-selected-day").removeClass("bd-selected-day"),T.find(".day-"+parseInt(t[2])).addClass("bd-selected-day")))},z=function(t){return""===t?"":(t=t.split("/"),t[1].length<2&&t[1]<10&&(t[1]="0"+t[1]),t[2].length<2&&t[2]<10&&(t[2]="0"+t[2]),t=t.join("/"))},G=function(t){var e;return e=6>t?t+1:0},K=function(t){for(E.find("option").remove(),i=0;i<101;i++){var e=t-95+i+"";if(x.forceFarsiDigits)for(var a=0;10>a;a++){var n=new RegExp(a,"g");e=e.replace(n,B[a])}E.append($("<option>",{value:t-95+i,text:e}))}},L=function(t){var e;return 1343>t&&t>1243?(e=t%33,1==e||5==e||9==e||13==e||17==e||22==e||26==e||30==e?!0:!1):1473>t&&t>1342?(e=t%17,1==e||5==e||9==e||13==e||18==e||22==e||26==e||30==e?!0:!1):"unknown"},N=function(t,e){return 7>e?31:12>e?30:L(t)?30:29};I=new Date,m=a(I.getFullYear(),I.getMonth()+1,I.getDate());var P=[];for(i=0;i<3;i++)P[i]=m[i];g=m[0],b=m[1],f=m[2],p=P[0],v=P[1],u=P[2],H.val(v),K(p),E.val(p),h=N(p,v);var Q=function(t,e){var a=n(t,e,1);return a=new Date(a.gy+"/"+a.gm+"/"+a.gd),G(a.getDay())};y=Q(p,v);var U=function(e,a){J.empty();for(var n=1,o=1;e>=n;){for(J.append($("<tr>",{"class":"tr-"+o})),i=0;i<7;i++){if(1==n)for(var d=0;a>d;)$("#bd-table-days-"+t+" .tr-1").append($("<td>",{"class":"bd-empty-cell"})),d++,i++;if(i<7&&e>=n){var r='<td><button class="day day-'+n+'" type="button">'+(x.forceFarsiDigits?B[n]:n)+"</button></td>";if(x.markToday&&n==f&&b==v&&g==p){var l=r.indexOf("day day-");r=r.slice(0,l)+" bd-today "+r.slice(l)}if(x.markHolidays&&6==i){var l=r.indexOf("day day-");r=r.slice(0,l)+" bd-holiday "+r.slice(l)}$("#bd-table-days-"+t+" .tr-"+o).append(r),n++}}o++}if(x.highlightSelectedDay){var s=S.val();s=s.split("/"),s[0]==p&&s[1]==v&&(T.find(".bd-selected-day").removeClass("bd-selected-day"),T.find(".day-"+parseInt(s[2])).addClass("bd-selected-day"))}};S.parent().on("click","button.day",function(){var t=p+"/"+v+"/"+$(this).attr("class").split(" ")[$(this).attr("class").split(" ").indexOf("day")+1].split("-")[1];x.twodigit&&(t=z(t)),S.val(t),S.trigger("change"),x.closeAfterSelect&&(k=!1,S.trigger("blur")),x.highlightSelectedDay&&(T.find(".bd-selected-day").removeClass("bd-selected-day"),$(this).addClass("bd-selected-day"))}),A.on("click",function(){H.val()<12?(H.val(parseInt(H.val())+1),H.trigger("change")):(H.val(1),H.trigger("change"),E.val(parseInt(E.val())+1),E.trigger("change"))}),j.on("click",function(){H.val()>1?(H.val(parseInt(H.val())-1),H.trigger("change")):(H.val(12),H.trigger("change"),E.val(parseInt(E.val())-1),E.trigger("change"))}),x.gotoToday&&M.on("click",function(){H.val(b),H.trigger("change"),E.val(g),E.trigger("change")}),U(h,y),"function"==typeof $().modal&&$('[data-toggle="tooltip"]').tooltip()};